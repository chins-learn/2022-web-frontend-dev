アプリケーションフレームワーク
=================================

概要
----------------

フレームワークの学習について、2つの壁を順に越える必要があります。
1. 未知のが概念の理解
2. 未経験の記述方法の学習

フレームワーク共通の主な概念
| 概念| 説明 |
| ---- | -------- |
| 仮想DOM | ページ単位で画面を一括操作する仕組み |
| データバインド | HTML要素に対する値の取得や設定を簡単に行う機能 |
| コンポーネント | 画面を分割して開発するための部品 |
| 状態管理ライブラリ | アプリ全体のコンポーネントを連携させるライブラリ |
| ルーター | 仮想のURLで画面切り替えを行う仕組み |
| ビルド | Webサーバーで利用できるファイル群を出力する一連の処理 |


各フレームワークは独自の記述方法があります。これらの記述はJavaScriptのコードに変換後、実行されます。

* React  
avaScriptの中にXMLを埋め込む「JSX（JavaScript XML）形式」
* Angular  
クラス定義、HTML（拡張構文）、CSSをファイルで分離し、クラスからHTMLとCSSをインポートして利用する「Componentクラス形式」
* Vue  
JavaScript、HTML（拡張構文）、CSSを1つのファイルにまとめた「SFC（Single File Component）形式」

### 仮想DOM

ページ単位で画面を一括操作する仕組みです。

仮想DOMは、そのJavaScriptコードとブラウザAPIの間に入り、DOM操作の複雑さを軽減し、処理を高速化します。仮想DOM自身もオブジェクト構造を持ち、その状態はDOMと同期するので、開発者は仮想DOMを意識するだけで済みます。

メリッド
* HTML構造やイベント処理を簡単に記述できる。
* HTML要素に対する値の取得や設定が簡単にできる（データバインド）。
* 仮想DOMで変更のあった差分のみをDOMに反映するので表示速度が向上する。

### コンポーネント

フレームワークを使った画面の作成では、画面を部品に分割して開発できます。この部品を「コンポーネント」と呼びます。

コンポーネントはJavaScriptコード、CSS、HTML（拡張構文）をセットにしたもので、部品として独立動作が可能です。

コンポーネントは画面を分割できるだけでなく、コンポーネントないにコンポーネントを配置する入れ子構造（親子構造）が可能です。この機能を利用すれば、複雑な画面レイアウトを単純な機能のコンポーネントからくみ上げることが可能になります。入れ子構造のコンポーネントでは、内包する側を「親コンポーネント」、内包された側を「子コンポーネント」と呼ぶことができます。
同じ親コンポーネントに内包されるコンポーネントを「兄弟コンポーネント」、子コンポーネントのさらに子コンポーネントを「孫コンポーネント」と呼ぶこともあります。

メリッド
* 開発が容易  
分割により対象範囲が狭くなり、コード量の減少、複雑さの低減ができます。
* 開発期間の短縮  
1つの画面作成を複数人で分担可能で、かつ各人の作業は独立しているので、完成までの時間を短縮できます。
* 複雑なレイアウト、機能の実現  
1つのコンポーネントが、画面全体を実装するのと同等の機能を持ちますので、例えばリスト表示の1行にページ全体と同等程度複雑なレイアウト、機能の実装が容易になります。
* 開発効率の向上  
蓄積した部品を再利用することで、重複した作業を削減できます。


### 状態管理ライブラリ

**状態管理ライブラリ**は、アプリ全体のコンポーネントを連携させ、コンポーネント事の状態データの整合性を取ります。状態データは、コンポーネントの表示に必要なパラメータであり、表示の変化に応じて値が変わります。

親子関係にあるコンポーネントの状態データを、親コンポーネントがまとめて管理すれば連携の複雑さは軽減されますが、限界があります。そこで利用するのが、「状態管理ライブラリ」です。アプリ全体のコンポーネントの状態データを1箇所で管理することでコンポーネント間のスムーズな連携を実現します。

通知を受ける側のコンポーネントは、状態管理ライブラリに対し必要なデータのみ通知してもらう登録を行い、無駄な通知を回避します。また、状態管理ライブラリは、同一ページ内のコンポーネント間の連携以外にも、ページ間のデータ共有、サーバーからのデータ変更通知などのデータも扱います。

* Redux公式サイト（React用）  
https://redux.js.org/
* NgRx公式サイト（Angular用）  
https://ngrx.io/
* Vuex公式サイト（Vue用）  
https://vuex.vuejs.org/ja/


### ルーター

ルーターが必要になる背景は、モダンWebではページ切り替えの時、JavaScriptのコードがページごと仮想DOMを書き替えて再描画します。従来型Webのように、ページ切り替えのたびにURLにアクセスするわけではあります。そのため、モダンWebではWebブラウザのURL表示が変化しません。

どのページも同じURLの場合のデメリット
1. ブックマークが利用できない
2. SNSでリンクのシェアができない
3. ページ間をURLリンクで移動できない
4. どのページを表示していても、リロードを行うと1ページ目に戻る

これを解決するのが「ルーター」です。ルーターは、URLにページごとの仮想のパスを定義し、それに基づくページの切り替えを可能にする機能です。

### ビルド

「ビルド」は、フレームワークを使った開発において、ソースコードと関連ファイルを加工して、Webサーバーで利用できるファイル群を出力する一連の処理です。フレームワークでは1つの画面をコンポーネントに分割したり、独自の構文を利用したりするため、従来型Webでは必要なかったファイルの結合や変換が必要になります。ビルドでは以下のような処理を行います。

1. 対象ファイルの読み込み  
    - JavaScript、TypeScriptソースコード
    - フレームワーク独自の仮想DOM向け記述コード  
    - 依存ファイルの読み込み  

2. 加工  
    - フレームワーク独自の仮想DOM向け記述コードをJavaScriptコードへ変換
    - TypeScriptのコードをJavaScriptコードへコンパイル
    - JavaScriptのコードを指定したECMAScriptのバージョンへ変換

3. 最適化（Productionビルドのみ）
    - 不要コードの削除
    - コードのサイズ縮小と難読化

4. 出力
    - 実行用ファイルの生成
    - 公開用の静的ファイル（favicon.icoなど）のコピー
    - テンプレートからindex.htmlを生成
    - デバッグ用のmapファイル生成


フレームワークごとの特徴
-------------------------

### React

React公式サイト  https://ja.reactjs.org/

1. 生いたち  
Facebookサイトにおいて、フロントエンド開発の複雑さを軽減するために2013年リリースされました。
2. 設計方針  
複雑さの回避が優先されています。最小限のコア機能のみパッケージ化することで、フレームワーク本体のメンテナンス作業の軽減し、バージョンアップの容易さを実現しています。
3. 機能  
仮想DOMとコンポーネント機能のみ提供しています。これらコア機能のみの提供のため、公式サイトでは自分自身をフレームワークではなく、ライブラリと呼んでいます。不足する機能は、開発者が自由に選択します。
4. 補足  
コア機能のみですので、従来型Webの一部に取り込むこともできます。モダンWeb開発には、ルーターや状態管理、通信機能などのライブラリの追加が必要です。

### Angular

Angular公式サイト  https://angular.io/

1. 生いたち  
Googleが主導するシングルページアプリケーション向けフレームワーク「AngularJS」を再設計して、2016年にリリースされました。
2. 設計方針  
シングルページアプリケーションに必要な機能を、一括して提供することを目指しています。Reactとは全く逆の方針です。
3. 機能  
シングルページアプリケーションに必要な機能に加え、オフライン対応のための機能やMaterial UIライブラリの組込みまで提供されています。開発ツールも統合されています。
4. 補足  
フレームワークを直訳すると「枠組」です。その名の通り、Angular開発チームが考えるベストプラクティスに準拠して、コードを作成するようになっています。これは自由なコード作成とは対極にありますので、開発エンジニアによって好みが分かれます。

### Vue

Vue公式サイト  https://v3.ja.vuejs.org/

1. 生いたち  
Evan You（個人）が開発をはじめ、現在は多くのスポンサー企業が参加しています。開発の動機は、「Angularの本当に好きだった部分を抽出して、余分な概念なしに本当に軽いものを作る」。
2. 設計方針  
Reactのように最小限のコア機能のみパッケージ化していますが、追加可能な専用ライブラリも準備されています。そのため、「段階的な機能拡張」を謳っています。
3. 機能  
仮想DOMとコンポーネント機能のみ提供しています。ただし、追加可能なルーターや状態管理ライブラリなども準備されています。  
追加可能ライブラリ一覧  
https://github.com/vuejs/vue#user-content-ecosystem
4. 補足  
フレームワークを直訳すると「枠組」です。その名の通り、Angular開発チームが考えるベストプラクティスに準拠して、コードを作成するようになっています。これは自由なコード作成とは対極にありますので、開発エンジニアによって好みが分かれます。

フレームワークの比較記事  
https://jp.vuejs.org/v2/guide/comparison.html


